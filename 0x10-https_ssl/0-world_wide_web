#!/usr/bin/env bash
# Script to audit subdomains of a domain

# Function to display usage information
usage() {
    echo "Usage: $0 <domain> [subdomain]"
    echo "Example: $0 holberton.online"
    echo "Example: $0 holberton.online web-02"
    exit 1
}

# Check if domain argument is provided
if [ -z "$1" ]; then
    usage
fi

# Set domain and subdomain variables
domain="$1"
subdomain="${2:-www lb-01 web-01 web-02}"

# Function to query DNS records and display information
query_dns() {
    local sub=$1
    local result=$(dig "$sub.$domain" +short)

    if [ -n "$result" ]; then
        echo "The subdomain $sub is a $(dig "$sub.$domain" | awk '/^'${sub}'/ {print $4}') record and points to $result"
    fi
}

# Loop through each subdomain and query DNS records
for sub in $subdomain; do
    query_dns "$sub"
done
